(function(t){function e(e){for(var n,c,i=e[0],s=e[1],u=e[2],d=0,l=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&l.push(o[c][0]),o[c]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);h&&h(e);while(l.length)l.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,c=1;c<a.length;c++){var i=a[c];0!==o[i]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},c={app:0},o={app:0},r=[];function i(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-0416335a":"61701a84","chunk-06c126a4":"31bfb665","chunk-0b36e024":"297db6c0","chunk-440756d6":"c431ea21","chunk-49829466":"3b5fade2","chunk-56bd78c2":"835ef466","chunk-69653ae1":"1521c602","chunk-6b2ad376":"504441d7","chunk-74394b4d":"b6f81a95","chunk-7a04005a":"ad031950","chunk-7e6c9579":"05f19e67","chunk-7e82d4d3":"879b3264","chunk-d37afff0":"0ce318ec","chunk-efcb31ba":"3bfe331a"}[t]+".js"}function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.e=function(t){var e=[],a={"chunk-0416335a":1,"chunk-06c126a4":1,"chunk-0b36e024":1,"chunk-440756d6":1,"chunk-49829466":1,"chunk-56bd78c2":1,"chunk-69653ae1":1,"chunk-6b2ad376":1,"chunk-74394b4d":1,"chunk-7a04005a":1,"chunk-d37afff0":1};c[t]?e.push(c[t]):0!==c[t]&&a[t]&&e.push(c[t]=new Promise((function(e,a){for(var n="css/"+({}[t]||t)+"."+{"chunk-0416335a":"9c786303","chunk-06c126a4":"f3943af3","chunk-0b36e024":"faff9c22","chunk-440756d6":"88a7b318","chunk-49829466":"1548963a","chunk-56bd78c2":"e85da57d","chunk-69653ae1":"dd4c26f1","chunk-6b2ad376":"9507c55c","chunk-74394b4d":"8526f7f7","chunk-7a04005a":"f3ff7b76","chunk-7e6c9579":"31d6cfe0","chunk-7e82d4d3":"31d6cfe0","chunk-d37afff0":"7487d9f1","chunk-efcb31ba":"31d6cfe0"}[t]+".css",o=s.p+n,r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var u=r[i],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===n||d===o))return e()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){u=l[i],d=u.getAttribute("data-href");if(d===n||d===o)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var n=e&&e.target&&e.target.src||o,r=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete c[t],h.parentNode.removeChild(h),a(r)},h.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){c[t]=0})));var n=o[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise((function(e,a){n=o[t]=[e,a]}));e.push(n[2]=r);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=i(t);var l=new Error;u=function(e){d.onerror=d.onload=null,clearTimeout(h);var a=o[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),c=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+c+")",l.name="ChunkLoadError",l.type=n,l.request=c,a[1](l)}o[t]=void 0}};var h=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(e)},s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/vueCountrySide/",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=e,u=u.slice();for(var l=0;l<u.length;l++)e(u[l]);var h=d;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("159b"),a("b64b"),a("4de4");var n=a("2b0e"),c=a("2f62"),o=a("bc3a"),r=a.n(o),i=a("2106"),s=a.n(i),u=a("7212"),d=a.n(u),l=(a("bbe3"),a("9062")),h=a.n(l),f=(a("e40d"),a("f5af")),p=a.n(f),m=(a("e829"),a("4989"),a("7bb1")),b=a("60d4"),v=a("4c93"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("RemoveModal"),a("RemoveBackModal"),a("CancelModal"),a("ErrAlert"),a("loading",{attrs:{active:t.isLoading,loader:"dots"},on:{"update:active":function(e){t.isLoading=e}}}),a("router-view")],1)},C=[],_=a("5530"),k=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"err-message"},[a("div",{staticClass:"alert alert-danger alert-dismissible fade",attrs:{role:"alert"}},[a("strong",[t._v("錯誤!")]),t._v(" 發生不明錯誤，請稍後再試! "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])])}],O=a("1157"),E=a.n(O),M={name:"ErrAlert",computed:Object(_["a"])({},Object(c["c"])(["err"])),methods:{showAlert:function(){this.err&&E()(".alert-danger").addClass("show")}},mounted:function(){this.showAlert()}},A=M,L=(a("ba5f"),a("2877")),S=Object(L["a"])(A,k,y,!1,null,"ab604486",null),I=S.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"remove-Modal",role:"dialog","data-backdrop":"static","data-keyboard":"false"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[a("div",{staticClass:"modal-header bg-warning"},[a("h5",{staticClass:"modal-title"},[t._v("注意! ")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:t.resetCancel}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._m(0),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.resetCancel}},[t._v("按錯了")]),a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:t.confirmRemove}},[t._v("確認刪除")])])])])])},T=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-body"},[a("p",[t._v("確認要刪除此項目嗎?")])])}],D={name:"RemoveModal",methods:{openModal:function(){E()("#remove-Modal").modal("show")},confirmRemove:function(){this.$store.dispatch("removeItemApi"),E()("#remove-Modal").modal("hide"),this.$store.dispatch("openModal",!1)},resetCancel:function(){this.$store.dispatch("openModal",!1)}},computed:{confirmCancel:{get:function(){return this.$store.state.confirmCancel},set:function(t){return this.$store.dispatch("openModal",t)}}},watch:{confirmCancel:function(){this.$store.state.confirmCancel&&this.openModal()}}},w=D,R=Object(L["a"])(w,P,T,!1,null,null,null),$=R.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"cancel-Modal",role:"dialog","data-backdrop":"static","data-keyboard":"false"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[a("div",{staticClass:"modal-header bg-warning"},[a("h5",{staticClass:"modal-title"},[t._v("注意! ")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:t.resetCancel}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._m(0),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.resetCancel}},[t._v("按錯了")]),a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:t.confirm}},[t._v("確認取消")])])])])])},x=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-body"},[a("p",[t._v("確認要取消購買嗎?")])])}],N={name:"CancelModal",methods:Object(_["a"])({openModal:function(){E()("#cancel-Modal").modal("show")},confirm:function(){this.cleanCart(),E()("#cancel-Modal").modal("hide"),this.$store.dispatch("openCancelModal",!1),this.$router.push("/shopping")},resetCancel:function(){this.$store.dispatch("openCancelModal",!1)}},Object(c["b"])(["cleanCart"])),computed:{removeCancel:{get:function(){return this.$store.state.removeCancel},set:function(t){return this.$store.dispatch("openCancelModal",t)}}},watch:{removeCancel:function(){this.$store.state.removeCancel&&this.openModal()}}},q=N,U=Object(L["a"])(q,j,x,!1,null,null,null),H=U.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal fade",attrs:{id:"delProductModal",role:"dialog","data-backdrop":"static","data-keyboard":"false"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[a("div",{staticClass:"modal-header bg-danger text-white"},[t._m(0),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:t.resetCancel}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),a("div",{staticClass:"modal-body"},[t._v(" 是否刪除 "),a("strong",{staticClass:"text-danger"},[t._v(t._s(t.productItem.title))]),t._v(" 商品(刪除後將無法恢復)。 ")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.resetCancel}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.deleteProduct}},[t._v(" 確認刪除 ")])])])])])])},B=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",{staticClass:"modal-title"},[a("span",[t._v("刪除產品")])])}],J=(a("99af"),{name:"RemoveBackModal",methods:Object(_["a"])({openDelModal:function(){E()("#delProductModal").modal("show")},resetCancel:function(){this.$store.dispatch("backRemoveModal",!1)},deleteProduct:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/admin/product/").concat(t.productItem.id);t.$store.dispatch("updateLoading",!0),t.$http.delete(e).then((function(e){e.data.success?(t.$store.dispatch("updateLoading",!1),E()("#delProductModal").modal("hide"),t.$store.dispatch("backRemoveModal",!1)):t.$store.dispatch("catchErr",!0),t.getProductList(t.pagination.current_page)}))}},Object(c["b"])(["getProductList"])),computed:Object(_["a"])({remove:{get:function(){return this.$store.state.backModule.remove},set:function(t){return this.$store.dispatch("backRemoveModal",t)}}},Object(c["c"])(["productItem","pagination"])),watch:{remove:function(){this.$store.state.backModule.remove&&this.openDelModal()}}}),W=J,F=Object(L["a"])(W,G,B,!1,null,null,null),V=F.exports,K={name:"App",components:{ErrAlert:I,RemoveModal:$,CancelModal:H,RemoveBackModal:V},computed:Object(_["a"])({},Object(c["c"])(["isLoading","err","confirmCancel","productId"]))},z=K,Q=(a("5c0b"),Object(L["a"])(z,g,C,!1,null,null,null)),X=Q.exports,Y=(a("d3b7"),a("3ca3"),a("ddb0"),a("8c4f"));n["a"].use(Y["a"]);var Z=Y["a"].prototype.push;Y["a"].prototype.push=function(t,e,a){return e||a?Z.call(this,t,e,a):Z.call(this,t).catch((function(t){return t}))};var tt=[{name:"Home",path:"/",component:function(){return a.e("chunk-440756d6").then(a.bind(null,"bb51"))},children:[{name:"Index",path:"",component:function(){return a.e("chunk-69653ae1").then(a.bind(null,"766f"))}},{name:"Contact",path:"contact",component:function(){return a.e("chunk-0b36e024").then(a.bind(null,"c9ef"))}},{name:"Shopping",path:"shopping",component:function(){return a.e("chunk-7a04005a").then(a.bind(null,"d171"))}},{name:"ProductInfo",path:"productInfo/:productId",component:function(){return a.e("chunk-56bd78c2").then(a.bind(null,"c80f"))}},{name:"CheckOut",path:"checkout",component:function(){return a.e("chunk-d37afff0").then(a.bind(null,"c95d"))}},{name:"OrderForm",path:"orderForm",component:function(){return a.e("chunk-6b2ad376").then(a.bind(null,"e2a9"))}},{name:"ConfirmOrder",path:"confirmOrder/:orderId",component:function(){return a.e("chunk-06c126a4").then(a.bind(null,"9b65"))}}]},{name:"Login",path:"/login",component:function(){return a.e("chunk-0416335a").then(a.bind(null,"a55b"))}},{path:"/admin",name:"Dashboard",component:function(){return a.e("chunk-49829466").then(a.bind(null,"a92e"))},children:[{name:"Products",path:"products",component:function(){return a.e("chunk-7e6c9579").then(a.bind(null,"372d"))},meta:{requiresAuth:!0}},{name:"Coupons",path:"coupons",component:function(){return a.e("chunk-74394b4d").then(a.bind(null,"e532"))},meta:{requiresAuth:!0}},{name:"OrderList",path:"order_list",component:function(){return a.e("chunk-7e82d4d3").then(a.bind(null,"d598"))},meta:{requiresAuth:!0}},{name:"Chart",path:"chart",component:function(){return a.e("chunk-efcb31ba").then(a.bind(null,"2ff8"))},meta:{requiresAuth:!0}}]},{path:"*",redirect:"/"}],et=new Y["a"]({routes:tt,scrollBehavior:function(t,e,a){return{x:0,y:0}}}),at=et;n["a"].prototype.$bus=new n["a"];a("a9e3"),a("ac1f"),a("5319"),a("b680");var nt=function(t){var e=Number(t);return"NT$".concat(e.toFixed(0).replace(/./g,(function(t,e,a){var n=e&&"."!==t&&(a.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t;return n})))},ct={state:{products:[]},actions:{getAllProduct:function(t){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/products/all");t.commit("LOADING",!0),r.a.get(e).then((function(e){t.commit("SET_ALL_PRODUCT",e.data.products),t.commit("LOADING",!1)})).catch((function(){t.commit("ERR_SHOW",!0)}))}},mutations:{SET_ALL_PRODUCT:function(t,e){t.products=e}},getters:{products:function(t){return t.products}}},ot=(a("a434"),{state:{cartData:JSON.parse(localStorage.getItem("cart"))||[],cartApiList:[],cacheId:""},actions:{getCartList:function(t){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/cart");r.a.get(e).then((function(e){t.commit("GET_CART",e.data.data)})).catch((function(){t.dispatch("catchErr",!0)}))},addToCart:function(t,e){var a=t.commit,n=t.state,c=e.item,o=e.num,r=void 0===o?1:o,i=[];if(n.cartData.forEach((function(t){i.push(t.product_id)})),-1===i.indexOf(c.id)){var s={product_id:c.id,qty:r,title:c.title,origin_price:c.origin_price,price:c.price,unit:c.unit,imageUrl:c.imageUrl};s.total=c.price*s.qty,a("CART_PUSH",s),localStorage.setItem("cart",JSON.stringify(n.cartData))}else{var u={};n.cartData.forEach((function(t,e){if(t.product_id===c.id){var n=t.qty;u={product_id:c.id,qty:n+=r,title:c.title,origin_price:c.origin_price,price:c.price,unit:c.unit,imageUrl:c.imageUrl},u.total=c.price*u.qty,a("SPLICE_CART",e)}})),a("CART_PUSH",u),localStorage.setItem("cart",JSON.stringify(n.cartData))}},removeCart:function(t,e){t.state.cartData.forEach((function(a,n){e.product_id===a.product_id&&t.commit("SPLICE_CART",n)})),localStorage.setItem("cart",JSON.stringify(t.state.cartData))},removeItemApi:function(t){t.commit("LOADING",!0);var e=t.state.cacheId,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/cart/").concat(e);r.a.delete(a).then((function(){t.dispatch("getCartList"),t.commit("LOADING",!1)})).catch((function(){t.dispatch("catchErr",!0)}))},plusItem:function(t,e){t.state.cartData.forEach((function(a){e.product_id===a.product_id&&t.commit("PLUS_ITEM",a)})),localStorage.setItem("cart",JSON.stringify(t.state.cartData))},minusItem:function(t,e){t.state.cartData.forEach((function(a){e.product_id===a.product_id&&a.qty>1&&t.commit("MINUS_ITEM",a)})),localStorage.setItem("cart",JSON.stringify(t.state.cartData))},cleanCart:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/cart"),e=[];r.a.get(t).then((function(t){var a=t.data.data.carts;a.forEach((function(t){e.push(t.id)}))})).then((function(){e.forEach((function(t){r.a.delete("".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/cart/").concat(t))}))}))},cleanAllCart:function(t){var e=t.commit,a=t.state;e("SPLICE_ALL_CART"),localStorage.setItem("cart",JSON.stringify(a.cartData))},saveCacheId:function(t,e){var a=t.commit;a("CACHE_ID",e)}},mutations:{GET_CART:function(t,e){t.cartApiList=e},CART_PUSH:function(t,e){t.cartData.push(e)},SPLICE_CART:function(t,e){t.cartData.splice(e,1)},SPLICE_ALL_CART:function(t){t.cartData.splice(0,t.cartData.length)},PLUS_ITEM:function(t,e){e.qty+=1,e.total=e.price*e.qty},MINUS_ITEM:function(t,e){e.qty-=1,e.total=e.price*e.qty},CACHE_ID:function(t,e){t.cacheId=e}},getters:{carts:function(t){return t.cartData},cartApi:function(t){return t.cartApiList}}}),rt={state:{backProducts:[],pagination:{},productItem:"",remove:!1},actions:{getProductList:function(t,e){var a=t.commit,n=t.dispatch,c="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/admin/products?page=").concat(e);n("updateLoading",!0),r.a.get(c).then((function(t){n("updateLoading",!1),a("SET_PRODUCTS",t.data.products),a("SET_PAGE",t.data.pagination)})).catch((function(){n("catchErr",!0)}))},getItem:function(t,e){var a=t.commit;a("SET_ITEM",e)},backRemoveModal:function(t,e){var a=t.commit;a("BACK_MODAL",e)}},mutations:{SET_PRODUCTS:function(t,e){t.backProducts=e},SET_PAGE:function(t,e){t.pagination=e},SET_ITEM:function(t,e){t.productItem=e},BACK_MODAL:function(t,e){t.remove=e}},getters:{productItem:function(t){return t.productItem},remove:function(t){return t.remove},backProducts:function(t){return t.backProducts},pagination:function(t){return t.pagination}}};n["a"].use(c["a"]);var it=new c["a"].Store({strict:!0,state:{isLoading:!1,err:!1,confirmCancel:!1,removeCancel:!1},actions:{updateLoading:function(t,e){var a=t.commit;a("LOADING",e)},catchErr:function(t,e){var a=t.commit;a("ERR_SHOW",e)},openModal:function(t,e){var a=t.commit;a("REMOVE_MODAL_SHOW",e)},openCancelModal:function(t,e){var a=t.commit;a("CANCEL_MODAL_SHOW",e)}},mutations:{LOADING:function(t,e){t.isLoading=e},ERR_SHOW:function(t,e){t.err=e},REMOVE_MODAL_SHOW:function(t,e){t.confirmCancel=e},CANCEL_MODAL_SHOW:function(t,e){t.removeCancel=e}},getters:{err:function(t){return t.err},isLoading:function(t){return t.isLoading},confirmCancel:function(t){return t.confirmCancel},removeCancel:function(t){return t.removeCancel}},modules:{productModule:ct,cartModule:ot,backModule:rt}});n["a"].config.productionTip=!1,n["a"].use(s.a,r.a),n["a"].use(d.a),n["a"].use(c["a"]),p.a.init(),n["a"].component("Loading",h.a),Object.keys(v).forEach((function(t){Object(m["d"])(t,v[t])})),Object(m["e"])("zh_TW",b),n["a"].component("ValidationObserver",m["a"]),n["a"].component("ValidationProvider",m["b"]),Object(m["c"])({classes:{valid:"is-valid",invalid:"is-invalid"}}),n["a"].filter("currency",nt),r.a.defaults.withCredentials=!0,new n["a"]({router:at,store:it,render:function(t){return t(X)}}).$mount("#app"),at.beforeEach((function(t,e,a){if(t.meta.requiresAuth){var n="".concat("https://vue-course-api.hexschool.io","/api/user/check");r.a.post(n).then((function(t){t.data.success?a():a({path:"/login"})}))}else a()}))},"5c0b":function(t,e,a){"use strict";a("9c0c")},"9c0c":function(t,e,a){},ba5f:function(t,e,a){"use strict";a("ca89")},ca89:function(t,e,a){}});
//# sourceMappingURL=app.b9d7dcc4.js.map