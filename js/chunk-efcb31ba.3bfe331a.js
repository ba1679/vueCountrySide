(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-efcb31ba"],{"07ac":function(t,r,a){var c=a("23e7"),i=a("6f53").values;c({target:"Object",stat:!0},{values:function(t){return i(t)}})},"13d5":function(t,r,a){"use strict";var c=a("23e7"),i=a("d58f").left,e=a("a640"),s=a("2d00"),n=a("605d"),o=e("reduce"),d=!n&&s>79&&s<83;c({target:"Array",proto:!0,forced:!o||d},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"2ff8":function(t,r,a){"use strict";a.r(r);var c=function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("div",[a("section",{staticClass:"containter"},[a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col-lg-4 mb-2"},[a("div",{staticClass:"card text-center py-2 h-100"},[a("div",{staticClass:"card-body d-flex justify-content-around align-items-center"},[a("i",{staticClass:"fas fa-wallet text-primary fa-3x"}),a("div",[a("div",{staticClass:"h4"},[t._v("目前總收益")]),a("div",{staticClass:"h5"},[t._v(t._s(t._f("currency")(t.totalPaid)))])])])])]),a("div",{staticClass:"col-lg-4 mb-2"},[a("div",{staticClass:"card text-center py-2 h-100"},[a("div",{staticClass:"card-body d-flex justify-content-around align-items-center"},[a("i",{staticClass:"fas fa-clipboard-list text-primary fa-3x"}),a("div",[a("div",{staticClass:"h4"},[t._v("訂單總量")]),a("div",{staticClass:"h3"},[t._v(t._s(t.orderList.length))])])])])]),a("div",{staticClass:"col-lg-4 mb-2"},[a("div",{staticClass:"card text-center py-2 h-100"},[a("div",{staticClass:"card-body d-flex justify-content-around align-items-center"},[a("i",{staticClass:"fas fa-file-invoice-dollar text-primary fa-3x"}),a("div",[a("div",{staticClass:"h4"},[t._v("應收貨款")]),a("div",{staticClass:"h5 text-danger"},[t._v(t._s(t._f("currency")(t.totalUnPaid)))])])])])])]),t._m(0)])])},i=[function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("div",{staticClass:"row mb-5"},[a("div",{staticClass:"col-lg-6 mb-2"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[t._v("產品類別售出總數")]),a("div",{staticClass:"card-body"},[a("div",{attrs:{id:"chart"}})])])]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[t._v("單一產品售出排名")]),a("div",{staticClass:"card-body"},[a("div",{attrs:{id:"chartProduct"}})])])])])}],e=(a("4de4"),a("d81d"),a("13d5"),a("99af"),a("159b"),a("07ac"),a("b64b"),a("a434"),{name:"Chart",data:function(){return{orderList:[],chartCategoryAry:[],chartProductAry:[],products:[]}},computed:{totalPaid:function(){if(0!==this.orderList.length){var t=this.orderList.filter((function(t){return t.is_paid})),r=t.map((function(t){return t.total}));return r.reduce((function(t,r){return t+r}))}return"目前無訂單"},totalUnPaid:function(){if(0!==this.orderList.length){var t=this.orderList.filter((function(t){return!t.is_paid})),r=t.map((function(t){return t.total}));return r.reduce((function(t,r){return t+r}))}return"目前無訂單"}},methods:{getOrderList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/admin/orders?page=").concat(t);r.$store.dispatch("updateLoading",!0),r.$http.get(a).then((function(t){r.orderList=t.data.orders,r.renderCategoryChart(),r.renderProductChart(),r.$store.dispatch("updateLoading",!1)})).catch((function(){r.$store.dispatch("catchErr",!0)}))},renderCategoryChart:function(){var t=this,r=[];t.orderList.forEach((function(t){r.push(Object.values(t.products))}));var a={};r.forEach((function(r){r.forEach((function(r){t.products.push(r.product)}))})),t.products.forEach((function(t){a[t.category]?a[t.category]+=1:a[t.category]=1}));var c=Object.keys(a);c.forEach((function(r){var c=[];c.push(r),c.push(a[r]),t.chartCategoryAry.push(c)}));c3.generate({bindto:"#chart",data:{type:"bar",columns:t.chartCategoryAry},color:{pattern:["#ED7D31","#5A9BD5","#FFC000","#2a9d8f"]}})},renderProductChart:function(){var t=this,r={};t.products.forEach((function(t){r[t.title]?r[t.title]+=1:r[t.title]=1}));var a=Object.keys(r);if(a.forEach((function(a){var c=[];c.push(a),c.push(r[a]),t.chartProductAry.push(c)})),t.chartProductAry.sort((function(t,r){return r[1]-t[1]})),t.chartProductAry.length>3){var c=0;t.chartProductAry.forEach((function(t,r,a){r>2&&(c+=a[r][1])})),t.chartProductAry.splice(3,t.chartProductAry.length),t.chartProductAry.push(["其他",c])}c3.generate({bindto:"#chartProduct",data:{type:"pie",columns:t.chartProductAry},color:{pattern:["#ED7D31","#5A9BD5","#FFC000","#2a9d8f"]}})}},mounted:function(){this.getOrderList()}}),s=e,n=a("2877"),o=Object(n["a"])(s,c,i,!1,null,null,null);r["default"]=o.exports},"6f53":function(t,r,a){var c=a("83ab"),i=a("df75"),e=a("fc6a"),s=a("d1e7").f,n=function(t){return function(r){var a,n=e(r),o=i(n),d=o.length,u=0,l=[];while(d>u)a=o[u++],c&&!s.call(n,a)||l.push(t?[a,n[a]]:n[a]);return l}};t.exports={entries:n(!0),values:n(!1)}},d58f:function(t,r,a){var c=a("1c0b"),i=a("7b0b"),e=a("44ad"),s=a("50c4"),n=function(t){return function(r,a,n,o){c(a);var d=i(r),u=e(d),l=s(d.length),f=t?l-1:0,h=t?-1:1;if(n<2)while(1){if(f in u){o=u[f],f+=h;break}if(f+=h,t?f<0:l<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:l>f;f+=h)f in u&&(o=a(o,u[f],f,d));return o}};t.exports={left:n(!1),right:n(!0)}},d81d:function(t,r,a){"use strict";var c=a("23e7"),i=a("b727").map,e=a("1dde"),s=e("map");c({target:"Array",proto:!0,forced:!s},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-efcb31ba.3bfe331a.js.map