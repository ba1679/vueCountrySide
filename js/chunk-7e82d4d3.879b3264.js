(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e82d4d3"],{1799:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"d-flex justify-content-center"},[s("nav",[s("ul",{staticClass:"pagination"},[s("li",{staticClass:"page-item",class:{disabled:!t.pages.has_pre}},[s("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.getProductPages(t.pages.current_page-1)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pages.total_pages,(function(a){return s("li",{key:a,staticClass:"page-item",class:{active:t.pages.current_page===a}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.getProductPages(a)}}},[t._v(t._s(a))])])})),s("li",{staticClass:"page-item",class:{disabled:!t.pages.has_next}},[s("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.getProductPages(t.pages.current_page+1)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},r=[],o={name:"Pagination",props:["pages"],methods:{getProductPages:function(t){this.$emit("emitProductPage",t)}}},i=o,c=s("2877"),n=Object(c["a"])(i,e,r,!1,null,null,null);a["a"]=n.exports},d598:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("h2",{staticClass:"text-center mt-3"},[t._v("訂單列表")]),t._m(0),s("div",{staticClass:"table-responsive mt-4"},[s("table",{staticClass:"table table-hover"},[t._m(1),s("tbody",t._l(t.orderList,(function(a){return s("tr",{key:a.id},[s("td",[t._v(t._s(a.user.name))]),s("td",[t._v(t._s(a.user.email))]),s("td",[t._v(t._s(a.user.tel))]),s("td",[s("button",{staticClass:"btn btn-outline-primary btn-sm mr-1",attrs:{type:"button"},on:{click:function(s){return t.openProductModal(a)}}},[t._v(" 訂單內容 ")])]),s("td",[a.is_paid?s("span",{staticClass:"text-success"},[t._v("已付款")]):s("span",[t._v("未付款")])]),s("td",[t._v(t._s(t._f("currency")(a.total)))]),s("td",[s("div",{staticClass:"btn-group btn-group-sm",attrs:{role:"group"}},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(s){return t.openModal(a)}}},[t._v(" 編輯 ")]),s("button",{staticClass:"\n                  btn btn-outline-secondary\n                  dropdown-toggle dropdown-toggle-split\n                ",attrs:{type:"button","data-toggle":"dropdown"}}),t._m(2,!0)])])])})),0)])]),s("Pagination",{attrs:{pages:t.pagination},on:{emitProductPage:t.getOrderList}}),s("div",{staticClass:"modal fade",attrs:{id:"orderModal",tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[s("div",{staticClass:"modal-content border-0"},[t._m(3),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-8"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("訂購姓名")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.cacheOrder.user.name,expression:"cacheOrder.user.name"}],staticClass:"form-control",attrs:{type:"text",id:"name"},domProps:{value:t.cacheOrder.user.name},on:{input:function(a){a.target.composing||t.$set(t.cacheOrder.user,"name",a.target.value)}}})]),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"address"}},[t._v("寄送地址")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.cacheOrder.user.address,expression:"cacheOrder.user.address"}],staticClass:"form-control",attrs:{type:"text",id:"address"},domProps:{value:t.cacheOrder.user.address},on:{input:function(a){a.target.composing||t.$set(t.cacheOrder.user,"address",a.target.value)}}})])]),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"tel"}},[t._v("電話")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.cacheOrder.user.tel,expression:"cacheOrder.user.tel"}],staticClass:"form-control",attrs:{type:"tel",id:"tel"},domProps:{value:t.cacheOrder.user.tel},on:{input:function(a){a.target.composing||t.$set(t.cacheOrder.user,"tel",a.target.value)}}})])]),s("hr")])])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){return t.updateOrder(t.cacheOrder.id)}}},[t._v(" 確認 ")])])])])]),s("div",{staticClass:"modal fade",attrs:{id:"orderProductsModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[s("div",{staticClass:"modal-content border-0"},[t._m(4),s("div",{staticClass:"modal-body"},[s("h5",[t._v("訂單編號: "+t._s(t.cacheOrder.id))]),s("table",{staticClass:"table table-striped table-responsive-lg"},[t._m(5),s("tbody",t._l(t.cacheOrder.products,(function(a){return s("tr",{key:a.id},[s("th",{attrs:{scope:"row"}},[t._v(t._s(a.product.title))]),s("td",[t._v(t._s(a.qty)+" / "+t._s(a.product.unit))]),s("td",[t._v(t._s(t._f("currency")(a.product.price)))]),a.final_total?s("td",[t._v(" "+t._s(t._f("currency")(parseInt(a.final_total)))+" ")]):t._e(),a.coupon?s("td",{staticClass:"text-success"},[t._v(" "+t._s(a.coupon.code)+" ")]):s("td",[t._v("無使用")])])})),0),s("tfoot",[s("tr",[s("td",{staticClass:"text-right",attrs:{colspan:"4"}},[t._v("總價")]),s("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("currency")(parseInt(t.cacheOrder.total)))+" ")])])])])]),t._m(6)])])]),s("div",{staticClass:"modal fade",attrs:{id:"placeOrderModal",tabindex:"-1","data-backdrop":"static"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[t._m(7),s("div",{staticClass:"modal-body"},[s("form",[t._m(8),t._m(9),t._m(10),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-8"},[s("label",{attrs:{for:"product"}},[t._v("購買品項")]),s("select",{staticClass:"form-control",attrs:{name:"product",id:"product"}},t._l(t.products,(function(a){return s("option",{key:a.id,domProps:{value:a.title}},[t._v(" "+t._s(a.title)+" ")])})),0)]),s("div",{staticClass:"form-group col-md-4"},[s("label",{attrs:{for:"num"}},[t._v("數量")]),s("select",{staticClass:"form-control",attrs:{id:"num"}},[s("option",{attrs:{selected:""}},[t._v("請選擇...")]),t._l(10,(function(a,e){return s("option",{key:e,domProps:{value:a}},[t._v(" "+t._s(a)+" ")])}))],2)])])])]),t._m(11)])])])],1)},r=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"d-flex justify-content-end"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#placeOrderModal"}},[s("i",{staticClass:"fas fa-shopping-cart mr-2"}),t._v("快速下單 ")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th",{attrs:{width:"80"}},[t._v("姓名")]),s("th",{attrs:{width:"80"}},[t._v("Email")]),s("th",{attrs:{width:"80"}},[t._v("電話")]),s("th",{attrs:{width:"130"}},[t._v("訂單資料")]),s("th",{attrs:{width:"115"}},[t._v("狀態")]),s("th",{attrs:{width:"100"}},[t._v("總金額")]),s("th",{attrs:{width:"100"}},[t._v("操作")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"dropdown-menu dropdown-menu-right"},[s("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("匯出訂單")]),s("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("付款資訊")]),s("div",{staticClass:"dropdown-divider"}),s("a",{staticClass:"dropdown-item text-danger",attrs:{href:"#"}},[t._v("刪除訂單")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal-header bg-dark text-white"},[s("h5",{staticClass:"modal-title"},[s("span",[t._v("修改訂單")])]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal-header bg-dark text-white"},[s("h5",{staticClass:"modal-title"},[s("span",[t._v("訂單內容")])]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("品名")]),s("th",{attrs:{scope:"col"}},[t._v("數量")]),s("th",{attrs:{scope:"col"}},[t._v("原價")]),s("th",{attrs:{scope:"col"}},[t._v("售價")]),s("th",{attrs:{scope:"col"}},[t._v("優惠碼")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 關閉 ")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal-header bg-primary text-white"},[s("h5",{staticClass:"modal-title",attrs:{id:"editModalLabel"}},[t._v("快速下單")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"name"}},[t._v("姓名")]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"name"}})]),s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"email"}},[t._v("Email")]),s("input",{staticClass:"form-control",attrs:{type:"email",id:"email"}})])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"address"}},[t._v("寄送地址")]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"address",placeholder:"請輸入路名、街道、樓層"}})])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-5"},[s("label",{attrs:{for:"city"}},[t._v("城市")]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"city"}})]),s("div",{staticClass:"form-group col-md-4"},[s("label",{attrs:{for:"zone"}},[t._v("區域")]),s("select",{staticClass:"form-control",attrs:{id:"zone"}},[s("option",{attrs:{selected:""}},[t._v("請選擇...")]),s("option",[t._v("...")])])]),s("div",{staticClass:"form-group col-md-3"},[s("label",{attrs:{for:"zip"}},[t._v("郵遞區號")]),s("input",{staticClass:"form-control",attrs:{type:"text",id:"zip"}})])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[t._v("確認下單")])])}],o=s("5530"),i=(s("99af"),s("1157")),c=s.n(i),n=s("1799"),l={name:"OrderList",data:function(){return{orderList:[{create_at:"",id:"",is_paid:!1,num:1,products:{product:[]},total:0,user:{}}],products:[],cacheOrder:{final_total:"",coupon:{code:""},products:[],user:{}},pagination:{}}},components:{Pagination:n["a"]},methods:{getOrderList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/admin/orders?page=").concat(t);a.$store.dispatch("updateLoading",!0),a.$http.get(s).then((function(t){a.orderList=t.data.orders,a.pagination=t.data.pagination,a.$store.dispatch("updateLoading",!1)})).catch((function(){a.$store.dispatch("catchErr",!0)}))},getAllProducts:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/admin/products/all");t.$http.get(a).then((function(a){t.products=a.data.products})).catch((function(){t.$store.dispatch("catchErr",!0)}))},openModal:function(t){this.cacheOrder=Object(o["a"])({},t),c()("#orderModal").modal("show")},openProductModal:function(t){this.cacheOrder=Object(o["a"])({},t),c()("#orderProductsModal").modal("show")},updateOrder:function(t){var a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/admin/order/").concat(t);a.$http.put(s,{data:a.cacheOrder}).then((function(t){t.data.success&&(c()("#orderModal").modal("hide"),alert("成功修改"),a.getOrderList())})).catch((function(){a.$store.dispatch("catchErr",!0)}))}},mounted:function(){this.getOrderList(),this.getAllProducts()}},d=l,u=s("2877"),p=Object(u["a"])(d,e,r,!1,null,null,null);a["default"]=p.exports}}]);
//# sourceMappingURL=chunk-7e82d4d3.879b3264.js.map