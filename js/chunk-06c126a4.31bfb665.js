(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06c126a4"],{1823:function(t,e,a){},"9b65":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("section",{staticClass:"container my-5"},[t.order.is_paid?a("div",{staticClass:"row mt-3 justify-content-center text-center"},[a("div",{staticClass:"col-8"},[t._m(0),a("router-link",{staticClass:"btn btn-outline-primary mr-1",attrs:{to:{name:"Index"}}},[t._v("回首頁")]),a("router-link",{staticClass:"btn btn-primary mr-1",attrs:{to:{name:"Shopping"}}},[t._v("繼續逛逛")])],1)]):t._e(),t.order.is_paid?t._e():a("div",{staticClass:"row mt-3"},[t._m(1),t._m(2),t._m(3),t._m(4)]),t._m(5),a("div",{staticClass:"row justify-content-center my-3"},[a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table mb-3 text-center"},[t._m(6),a("tr",[a("th",[t._v("姓名")]),a("td",[t._v(t._s(t.order.user.name))])]),a("tr",[a("th",[t._v("email")]),a("td",[t._v(t._s(t.order.user.email))])]),a("tr",[a("th",[t._v("連絡電話")]),a("td",[t._v(t._s(t.order.user.tel))])]),a("tr",[a("th",[t._v("寄送地址")]),a("td",[t._v(" "+t._s(t.order.user.address?t.order.user.address:"到店自取")+" ")])])])])]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table mb-3 text-center"},[t._m(7),a("tr",[a("th",[t._v("訂單編號")]),a("td",[t._v(t._s(t.orderId))])]),a("tr",[a("th",[t._v("訂單日期")]),a("td",[t._v(t._s(t.timeTransform))])]),a("tr",[a("th",[t._v("付款狀態")]),a("td",{class:{"text-success":t.order.is_paid}},[t._v(" "+t._s(t.order.is_paid?"已付款":"未付款")+" ")])]),a("tr",[a("th",[t._v("訂單金額")]),a("td",[t._v(t._s(t._f("currency")(t.order.total)))])])])])])]),a("div",{staticClass:"mb-3"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header",attrs:{id:"cartDetail"}},[a("div",{staticClass:"d-flex justify-content-around align-items-center"},[a("a",{staticClass:"btn btn-link btn-block text-left",attrs:{href:"#","data-toggle":"collapse","data-target":"#collapseOne"}},[t._v(" 購物車明細 ")]),a("strong",[t._v(t._s(t._f("currency")(t.order.total)))])])])]),a("div",{staticClass:"collapse show",attrs:{id:"collapseOne","data-parent":"#cartDetail"}},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table"},[t._l(t.order.products,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"cart-item"},[t._v(t._s(e.product.title))]),a("td",[a("img",{staticClass:"cart-img",attrs:{src:e.product.imageUrl,alt:"商品圖"}})]),a("td",[t._v(t._s(e.qty))]),a("td",[t._v(t._s(e.product.unit))]),a("td",[t._v(t._s(t._f("currency")(e.product.origin_price)))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.final_total)))]),e.coupon?a("td",{staticClass:"text-right text-success"},[t._v(" 已套用優惠券 ")]):a("td",{staticClass:"text-right"},[t._v(" 未套用優惠券 ")])])})),a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"6"}},[t._v("處理費")]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.handleFee)))])]),a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"6"}},[t._v("合計")]),a("td",{staticClass:"text-right"},[a("strong",{staticClass:"h4"},[t._v(t._s(t._f("currency")(t.order.total+t.handleFee)))])])])],2)])]),t.order.is_paid?t._e():a("div",{staticClass:"text-center mt-3"},[a("div",{staticClass:"h5 pb-2"},[t._v("選擇付款方式")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.payOrder(e)}}},[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.payMethod,expression:"payMethod"}],staticClass:"form-check-input",attrs:{type:"radio",name:"payment",id:"creditCard",value:"信用卡"},domProps:{checked:t._q(t.payMethod,"信用卡")},on:{change:function(e){t.payMethod="信用卡"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"creditCard"}},[t._v(" 信用卡 ")])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.payMethod,expression:"payMethod"}],staticClass:"form-check-input",attrs:{type:"radio",name:"payment",id:"webATM",value:"網路ATM"},domProps:{checked:t._q(t.payMethod,"網路ATM")},on:{change:function(e){t.payMethod="網路ATM"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"webATM"}},[t._v(" 網路ATM ")])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.payMethod,expression:"payMethod"}],staticClass:"form-check-input",attrs:{type:"radio",name:"payment",id:"cash",value:"到店付現"},domProps:{checked:t._q(t.payMethod,"到店付現")},on:{change:function(e){t.payMethod="到店付現"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"cash"}},[t._v(" 到店付現 ")])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.payMethod,expression:"payMethod"}],staticClass:"form-check-input",attrs:{type:"radio",name:"payment",id:"linePay",value:"LinePay"},domProps:{checked:t._q(t.payMethod,"LinePay")},on:{change:function(e){t.payMethod="LinePay"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"linePay"}},[t._v(" LinePay ")])]),a("div",{staticClass:"d-flex justify-content-end mt-3"},[a("div",{class:{"d-none":t.order.is_paid}},[a("button",{staticClass:"btn btn-secondary mr-1",attrs:{type:"button"},on:{click:t.confirmAlert}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:t.payOrder}},[t._v(" 確認付款 ")])])])])])])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"alert alert-success alert-rounded"},[a("div",{staticClass:"h5"},[t._v("結帳完成，感謝購買")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-3"},[a("div",{staticClass:"\n            alert alert-secondary\n            d-flex\n            flex-column\n            align-items-center\n            alert-rounded\n          "},[a("small",[t._v("STEP 1.")]),a("i",{staticClass:"fas fa-shopping-cart mb-1"}),a("p",{staticClass:"h5"},[t._v("確認購物清單")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-3"},[a("div",{staticClass:"\n            alert alert-secondary\n            d-flex\n            flex-column\n            align-items-center\n            alert-rounded\n          "},[a("small",[t._v("STEP 2.")]),a("i",{staticClass:"fas fa-info mb-1"}),a("p",{staticClass:"h5"},[t._v("輸入訂購人資料")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-3"},[a("div",{staticClass:"\n            alert alert-primary\n            d-flex\n            flex-column\n            align-items-center\n            alert-rounded\n          "},[a("small",[t._v("STEP 3.")]),a("i",{staticClass:"fas fa-clipboard-list mb-1"}),a("p",{staticClass:"h5"},[t._v("選擇付款方式")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-3"},[a("div",{staticClass:"\n            alert alert-light\n            d-flex\n            flex-column\n            align-items-center\n            alert-rounded\n          "},[a("small",[t._v("STEP 3.")]),a("i",{staticClass:"fas fa-check-circle mb-1"}),a("p",{staticClass:"h5"},[t._v("完成購買")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-center my-4"},[t._v(" 親愛的顧客您好，"),a("br"),t._v("感謝您訂購我們的優質農產，以下是您的訂購資訊 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",{attrs:{colspan:"2"}},[t._v("收件人資料")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",{attrs:{colspan:"2"}},[t._v("訂單資訊")])])}],c=a("5530"),i=(a("99af"),a("1157")),n=a.n(i),l=a("2f62"),o={name:"ConfirmOrder",data:function(){return{orderId:"",order:{coupon:"",products:[],user:{}},payMethod:"信用卡",handleFee:80}},computed:{timeTransform:function(){var t=new Date(1e3*this.order.create_at).toLocaleDateString();return t}},methods:Object(c["a"])({getOrderList:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/order/").concat(t);e.$http.get(a).then((function(t){e.order=t.data.order})).catch((function(){e.$store.dispatch("catchErr",!0)}))},confirmAlert:function(){this.$store.dispatch("openCancelModal",!0)},payOrder:function(){var t=this,e=t.orderId,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/pay/").concat(e);t.$store.dispatch("updateLoading",!0),t.$http.post(a).then((function(){t.getOrderList(e),n()("html,body").scrollTop(0),t.cleanCart(),t.cleanAllCart(),t.$store.dispatch("updateLoading",!1)})).catch((function(){t.$store.dispatch("catchErr",!0)}))}},Object(l["b"])(["cleanCart","cleanAllCart"])),mounted:function(){this.orderId=this.$route.params.orderId,this.getOrderList(this.orderId)}},d=o,h=(a("b2b7"),a("2877")),u=Object(h["a"])(d,s,r,!1,null,"5ff98fa9",null);e["default"]=u.exports},b2b7:function(t,e,a){"use strict";a("1823")}}]);
//# sourceMappingURL=chunk-06c126a4.31bfb665.js.map