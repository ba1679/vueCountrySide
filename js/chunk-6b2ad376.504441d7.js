(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b2ad376"],{"106d":function(t,s,a){},c39d:function(t,s,a){"use strict";a("106d")},e2a9:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("section",{staticClass:"container my-5"},[a("div",{staticClass:"h2 text-secondary text-center"},[t._v("上田園農產 結帳流程")]),t._m(0),a("div",{staticClass:"mt-3"},[a("div",{staticClass:"card mb-3"},[a("div",{staticClass:"card-header",attrs:{id:"cartDetail"}},[a("div",{staticClass:"d-flex justify-content-around align-items-center"},[a("a",{staticClass:"btn btn-link btn-block text-left",attrs:{href:"#",type:"button","data-toggle":"collapse","data-target":"#collapseCart"}},[t._v(" 購物車明細 ")]),a("strong",[t._v(t._s(t._f("currency")(t.cartApi.total+t.handleFee)))])])])]),a("div",{staticClass:"collapse show",attrs:{id:"collapseCart","data-parent":"#cartDetail"}},[a("div",{staticClass:"table-responsive my-3"},[a("table",{staticClass:"table"},[t._m(1),t._l(t.cartApi.carts,(function(s){return a("tr",{key:s.id},[a("td",[a("a",{staticClass:"far fa-trash-alt text-danger",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.removeAlert(s.id)}}})]),a("td",{staticClass:"cart-title"},[t._v(t._s(s.product.title))]),a("td",[a("img",{staticClass:"cart-img",attrs:{src:s.product.imageUrl,alt:"商品圖"}})]),a("td",[t._v(" "+t._s(s.qty)+" ")]),a("td",[t._v(t._s(s.product.unit))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(s.product.price)))]),a("td",{staticClass:"text-right"},[t._v("NT$"+t._s(s.total))])])})),a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"6"}},[t._v("處理費")]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.handleFee)))])]),a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"6"}},[t._v("總計")]),a("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("currency")(t.cartApi.total+t.handleFee))+" ")])]),a("tr",[t.cartApi.total!==t.cartApi.final_total?a("td",{staticClass:"text-right text-success",attrs:{colspan:"6"}},[t._v(" 折扣價 ")]):t._e(),t.cartApi.total!==t.cartApi.final_total?a("td",{staticClass:"text-right text-success"},[t._v(" "+t._s(t._f("currency")(t.cartApi.final_total+t.handleFee))+" ")]):t._e(),t.status.err?a("td",{staticClass:"text-right text-danger",attrs:{colspan:"7"}},[t._v(" 無此折價券 ")]):t._e()])],2),a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.couponCode},on:{input:function(s){s.target.composing||(t.couponCode=s.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("a",{staticClass:"btn btn-outline-success",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.useCoupon(s)}}},[t._v("套用優惠券 "),t.status.loading?a("i",{staticClass:"fas fa-circle-notch fa-spin"}):t._e()])])])])]),a("div",{staticClass:"h3 bg-light text-center text-secondary py-3"},[t._v(" 訂購人資訊 ")]),a("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(s){var e=s.invalid;return[a("form",{on:{submit:function(s){return s.preventDefault(),t.sendOrder(s)}}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,r=s.classes;return[a("label",{attrs:{for:"name"}},[t._v("訂購人姓名 "),a("span",{staticClass:"text-danger"},[t._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",class:r,attrs:{type:"text",name:"姓名",id:"name",placeholder:"請輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(s){s.target.composing||t.$set(t.form.user,"name",s.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(e[0]))])]}}],null,!0)})],1),a("div",{staticClass:"form-group col-md-6"},[a("validation-provider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,r=s.classes;return[a("label",{attrs:{for:"email"}},[t._v("訂購人Email "),a("span",{staticClass:"text-danger"},[t._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",class:r,attrs:{type:"text",name:"email",id:"email",placeholder:"請輸入email"},domProps:{value:t.form.user.email},on:{input:function(s){s.target.composing||t.$set(t.form.user,"email",s.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(e[0]))])]}}],null,!0)})],1)]),a("div",{staticClass:"form-row"},[a("validation-provider",{staticClass:"form-group col-md-6",attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,r=s.classes;return[a("div",[a("label",{attrs:{for:"tel"}},[t._v("連絡電話 "),a("span",{staticClass:"text-danger"},[t._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",class:r,attrs:{type:"tel",name:"電話",id:"tel"},domProps:{value:t.form.user.tel},on:{input:function(s){s.target.composing||t.$set(t.form.user,"tel",s.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(e[0]))])])]}}],null,!0)}),a("div",{staticClass:"form-group col-md-6"},[a("label",{staticClass:"mr-3",attrs:{for:"shipping"}},[t._v(" 取貨方式 : ")]),a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"radio",id:"selfTake",name:"shippingOption",checked:""}}),a("label",{staticClass:"form-check-label",attrs:{for:"selfTake"}},[t._v("到店自取")])]),a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"radio",id:"shipping",name:"shippingOption"}}),a("label",{staticClass:"form-check-label",attrs:{for:"shipping"}},[t._v("宅配寄送")])])])],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"address"}},[t._v("寄送地址 "),a("small",{staticClass:"ml-2"},[t._v("若自取可跳過此欄位")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",attrs:{type:"text",name:"address",id:"address",placeholder:"路名、樓層等等"},domProps:{value:t.form.user.address},on:{input:function(s){s.target.composing||t.$set(t.form.user,"address",s.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"message"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"留言區",id:"message",cols:"20",rows:"5",placeholder:"有什麼特殊需求嗎?"},domProps:{value:t.form.message},on:{input:function(s){s.target.composing||t.$set(t.form,"message",s.target.value)}}})]),a("div",{staticClass:"d-flex justify-content-end"},[a("button",{staticClass:"btn btn-secondary mr-1",attrs:{type:"button"},on:{click:t.showAlert}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-primary",class:{"not-allow":e},attrs:{type:"submit",disabled:e}},[t._v(" 下一步 ")])])])]}}])})],1)])])},r=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-lg-3"},[a("div",{staticClass:"\n            alert alert-secondary\n            d-flex\n            flex-column\n            align-items-center\n            alert-rounded\n          "},[a("small",[t._v("STEP 1.")]),a("i",{staticClass:"fas fa-shopping-cart mb-1"}),a("p",{staticClass:"h5"},[t._v("確認購物清單")])])]),a("div",{staticClass:"col-lg-3"},[a("div",{staticClass:"\n            alert alert-primary\n            d-flex\n            flex-column\n            align-items-center\n            alert-rounded\n          "},[a("small",[t._v("STEP 2.")]),a("i",{staticClass:"fas fa-info mb-1"}),a("p",{staticClass:"h5"},[t._v("輸入訂購人資料")])])]),a("div",{staticClass:"col-lg-3"},[a("div",{staticClass:"\n            alert alert-light\n            d-flex\n            flex-column\n            align-items-center\n            alert-rounded\n          "},[a("small",[t._v("STEP 3.")]),a("i",{staticClass:"fas fa-clipboard-list mb-1"}),a("p",{staticClass:"h5"},[t._v("選擇付款方式")])])]),a("div",{staticClass:"col-lg-3"},[a("div",{staticClass:"\n            alert alert-light\n            d-flex\n            flex-column\n            align-items-center\n            alert-rounded\n          "},[a("small",[t._v("STEP 3.")]),a("i",{staticClass:"fas fa-check-circle mb-1"}),a("p",{staticClass:"h5"},[t._v("完成購買")])])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("thead",[a("th",[t._v("刪除")]),a("th",{attrs:{colspan:"2"}},[t._v("品名")]),a("th",[t._v("數量")]),a("th",[t._v("單位")]),a("th",{staticClass:"text-right"},[t._v("單價")]),a("th",{staticClass:"text-right"},[t._v("小計")])])}],i=a("5530"),l=(a("99af"),a("2f62")),o={name:"CheckOut",data:function(){return{couponCode:"",couponMsg:"",handleFee:80,form:{user:{address:""},message:""},status:{loading:!1,err:!1}}},watch:{cartApi:function(){this.cartApi.carts.length||this.$router.push("/shopping")}},computed:Object(i["a"])({},Object(l["c"])(["cartApi"])),methods:Object(i["a"])({removeAlert:function(t){this.$store.dispatch("openModal",!0),this.$store.dispatch("saveCacheId",t)},showAlert:function(){this.$store.dispatch("openCancelModal",!0)},useCoupon:function(){var t=this;t.status.loading=!0;var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/coupon"),a={code:t.couponCode};t.$http.post(s,{data:a}).then((function(s){t.couponCode="",s.data.success?(t.couponMsg=s.data.message,t.getCartList(),t.status.loading=!1,t.status.err=!1):(t.status.err=!0,t.status.loading=!1)})).catch((function(){t.$store.dispatch("catchErr",!0)}))},sendOrder:function(){var t=this,s=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/order");s.$http.post(a,{data:s.form}).then((function(a){if(a.data.success){var e=a.data.orderId;s.$router.push("/confirmOrder/".concat(e))}else t.$store.dispatch("catchErr",!0)})).catch((function(){s.$store.dispatch("catchErr",!0)}))}},Object(l["b"])(["getCartList"])),mounted:function(){this.getCartList()}},c=o,n=(a("c39d"),a("2877")),d=Object(n["a"])(c,e,r,!1,null,"1b3a9672",null);s["default"]=d.exports}}]);
//# sourceMappingURL=chunk-6b2ad376.504441d7.js.map