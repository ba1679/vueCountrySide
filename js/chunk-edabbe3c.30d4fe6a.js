(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-edabbe3c"],{"0af7":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"dropdown"},[e("a",{staticClass:"position-relative",attrs:{href:"#","data-toggle":"dropdown"}},[e("i",{staticClass:"fas fa-shopping-cart fa-2x text-countryLight"}),e("span",{staticClass:"badge badge-pill badge-danger position-absolute badge-position"},[t._v(t._s(t.cartLength))])]),e("div",{staticClass:"dropdown-menu dropdown-menu-right"},[e("div",{staticClass:"px-4 py-3"},[0!==t.cartLength?e("h6",[t._v("已加入購物車商品")]):e("h6",[t._v("購物車沒有東西喔")]),e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table"},t._l(t.cartList,(function(a){return e("tr",{key:a.id},[e("td",[e("a",{staticClass:"far fa-trash-alt text-danger",attrs:{href:"#","data-title":"100%台灣好米"},on:{click:function(e){return e.preventDefault(),t.showAlert(a.id)}}})]),e("td",{staticClass:"title-width"},[t._v(t._s(a.product.title))]),e("td",[e("img",{staticClass:"cart-img",attrs:{src:a.product.imageUrl,alt:"商品圖"}})]),e("td",[t._v(t._s(a.qty))]),e("td",[t._v(t._s(a.product.unit))]),e("td",[t._v("NT$"+t._s(a.total))])])})),0),0!==t.cartLength?e("router-link",{staticClass:"btn btn-primary btn-block",attrs:{to:{name:"CheckOut"}}},[t._v("結帳去")]):e("router-link",{staticClass:"btn btn-primary btn-block",attrs:{to:{name:"Shopping"}}},[t._v("趕緊購物去")])],1)])])])])},i=[],n=e("e68f"),c={name:"CartInfo",data:function(){return{cartList:[],cartLength:0}},mixins:[n["a"]],methods:{updateCart:function(t){this.cartList=t,this.cartLength=this.cartList.length},busEvent:function(){var t=this;t.$bus.$on("cartPush",(function(a){t.updateCart(a)}))}},mounted:function(){this.busEvent()}},r=c,o=(e("95ca"),e("2877")),l=Object(o["a"])(r,s,i,!1,null,null,null);a["a"]=l.exports},1799:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex justify-content-center"},[e("nav",[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disabled:!t.pages.has_pre}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.getProductPages(t.pages.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pages.total_pages,(function(a){return e("li",{key:a,staticClass:"page-item",class:{active:t.pages.current_page==a}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.getProductPages(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item",class:{disabled:!t.pages.has_next}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.getProductPages(t.pages.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},i=[],n={name:"Pagination",props:["pages"],methods:{getProductPages:function(t){this.$emit("emitProductPage",t)}}},c=n,r=(e("5e93"),e("2877")),o=Object(r["a"])(c,s,i,!1,null,"7fa80d99",null);a["a"]=o.exports},"230d":function(t,a,e){},"422c":function(t,a,e){},"5e93":function(t,a,e){"use strict";e("230d")},8418:function(t,a,e){"use strict";var s=e("c04e"),i=e("9bf2"),n=e("5c6c");t.exports=function(t,a,e){var c=s(a);c in t?i.f(t,c,n(0,e)):t[c]=e}},"95ca":function(t,a,e){"use strict";e("9a53")},"99af":function(t,a,e){"use strict";var s=e("23e7"),i=e("d039"),n=e("e8b5"),c=e("861d"),r=e("7b0b"),o=e("50c4"),l=e("8418"),u=e("65f0"),d=e("1dde"),f=e("b622"),p=e("2d00"),h=f("isConcatSpreadable"),g=9007199254740991,v="Maximum allowed index exceeded",m=p>=51||!i((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),C=d("concat"),b=function(t){if(!c(t))return!1;var a=t[h];return void 0!==a?!!a:n(t)},_=!m||!C;s({target:"Array",proto:!0,forced:_},{concat:function(t){var a,e,s,i,n,c=r(this),d=u(c,0),f=0;for(a=-1,s=arguments.length;a<s;a++)if(n=-1===a?c:arguments[a],b(n)){if(i=o(n.length),f+i>g)throw TypeError(v);for(e=0;e<i;e++,f++)e in n&&l(d,f,n[e])}else{if(f>=g)throw TypeError(v);l(d,f++,n)}return d.length=f,d}})},"9a53":function(t,a,e){},d171:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._m(0),e("section",{staticClass:"container mt-3"},[e("ol",{staticClass:"breadcrumb bg-transparent"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{attrs:{to:"/"}},[t._v("首頁")])],1),e("li",{staticClass:"breadcrumb-item active"},[t._v("線上商城")])]),e("div",{attrs:{role:"tabpanel"}},[e("ul",{staticClass:"nav nav-tabs mb-3"},[e("li",{staticClass:"nav-item "},[e("a",{staticClass:"nav-link",class:{active:"全部商品"==t.category},attrs:{href:"#","data-category":"全部商品"},on:{click:function(a){return a.preventDefault(),t.categoryFilter(a)}}},[t._v("全部商品")])]),e("li",{staticClass:"nav-item "},[e("a",{staticClass:"nav-link",class:{active:"台灣好米"==t.category},attrs:{href:"#","data-category":"台灣好米"},on:{click:function(a){return a.preventDefault(),t.categoryFilter(a)}}},[t._v("台灣好米")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",class:{active:"台灣好茶"==t.category},attrs:{href:"#","data-category":"台灣好茶"},on:{click:function(a){return a.preventDefault(),t.categoryFilter(a)}}},[t._v("台灣好茶")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",class:{active:"國產蜂蜜"==t.category},attrs:{href:"#","data-category":"國產蜂蜜"},on:{click:function(a){return a.preventDefault(),t.categoryFilter(a)}}},[t._v("國產蜂蜜")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",class:{active:"黃金畜牧"==t.category},attrs:{href:"#","data-category":"黃金畜牧"},on:{click:function(a){return a.preventDefault(),t.categoryFilter(a)}}},[t._v("黃金畜牧")])])]),e("div",{staticClass:"row mb-3"},t._l(t.productFilter,(function(a){return e("div",{key:a.id,staticClass:"col-lg-3 col-md-6 mb-3",attrs:{"data-aos":"fade-up","data-aos-duration":"1000","data-aos-once":"true"}},[e("div",{staticClass:"card h-100 "},[e("a",{staticClass:"detail-href"},[e("div",{staticClass:"category-tag"},[t._v(" "+t._s(a.category)+" ")]),e("div",{staticClass:"detail-bg"},[e("a",{staticClass:"btn btn-primary",class:{disabled:!a.is_enabled},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.moreDetail(a.id)}}},[t._v(t._s(a.is_enabled?"查看更多":"缺貨中"))])]),e("img",{staticClass:"card-img-top",attrs:{src:a.imageUrl,alt:""}})]),e("div",{staticClass:"card-body "},[e("a",{staticClass:"h5",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.moreDetail(a.id)}}},[t._v(t._s(a.title))]),e("div",{staticClass:"d-flex justify-content-end mt-3"},[e("del",{staticClass:"mr-auto"},[t._v(t._s(t._f("currency")(a.origin_price)))]),e("span",{staticClass:"text-warning"},[t._v("特價"),e("strong",{staticClass:"h6"},[t._v(t._s(t._f("currency")(a.price)))])])])]),e("div",[e("div",{staticClass:"form-inline justify-content-center"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.cartSelect,expression:"cartSelect"}],staticClass:"form-control form-sm",attrs:{name:"num"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.cartSelect=a.target.multiple?e:e[0]}}},t._l(10,(function(a,s){return e("option",{key:s,domProps:{value:a}},[t._v(t._s(a))])})),0),e("a",{staticClass:"bg-primary btn cart-btn w-100",class:{disabled:!a.is_enabled},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.addToCart(a.id,t.cartSelect)}}},[t._v(t._s(1==a.is_enabled?"加入購物車":"缺貨中"))])])])])])})),0)])]),"全部商品"===t.category?e("Pagination",{attrs:{pages:t.pagination},on:{emitProductPage:t.getProductList}}):t._e(),e("Cart",{staticClass:"cart-icon"}),e("a",{staticClass:"text-primary back-to-top d-none",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.backToTop(a)}}},[e("i",{staticClass:"fas fa-arrow-circle-up fa-3x"})])],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"jumbotron jumbotron-fluid jumbotron-bg bg-cover pt-3"},[e("div",{staticClass:"text-center"},[e("div",{staticClass:"h3 mb-4 text-primary"},[t._v("上田園農產 - 線上商城")]),e("div",{staticClass:"mt-3 d-flex justify-content-center"},[e("div",{staticClass:"coupon"},[e("p",{staticClass:"h4 p-2 text-white"},[t._v(" 歡慶青年返鄉週年 "),e("br"),t._v("即日起輸入 "),e("strong",{staticClass:"text-warning"},[t._v("countryside888 ")]),t._v(" 即可享8折優惠!! ")])])])])])}],n=(e("4de4"),e("99af"),e("1157")),c=e.n(n),r=e("e68f"),o=e("1799"),l=e("0af7"),u={name:"Shopping",data:function(){return{isLoading:!1,products:[],pagination:{},category:"全部商品"}},mixins:[r["a"]],components:{Pagination:o["a"],Cart:l["a"]},computed:{productFilter:function(){var t=this;return"全部商品"===t.category?this.products:(this.getAllProduct(),this.isLoading=!1,t.products.filter((function(a){return a.category===t.category})))}},methods:{getAllProduct:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/products/all"),a=this;a.isLoading=!0,this.$http.get(t).then((function(t){a.products=t.data.products,a.isLoading=!1}))},getProductList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/products?page=").concat(t),e=this;e.isLoading=!0,this.$http.get(a).then((function(t){e.products=t.data.products,e.pagination=t.data.pagination,e.isLoading=!1}))},moreDetail:function(t){this.$router.push("/productInfo/".concat(t))},categoryFilter:function(t){var a=t.currentTarget.getAttribute("data-category");this.category=a},backToTop:function(){c()("html,body").animate({scrollTop:0},1e3)}},mounted:function(){this.carts.carts=JSON.parse(localStorage.getItem("cartList"))||[],this.getProductList(),this.getCartList(),c()(window).scroll((function(){c()(this).scrollTop()>300?c()(".back-to-top").addClass("d-block"):c()(".back-to-top").removeClass("d-block")}))}},d=u,f=(e("ee08"),e("2877")),p=Object(f["a"])(d,s,i,!1,null,"4edfa6c2",null);a["default"]=p.exports},e68f:function(t,a,e){"use strict";e("99af"),e("159b");a["a"]={data:function(){return{carts:{},cartSelect:1}},methods:{getCartList:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/cart"),a=this;this.$http.get(t).then((function(t){a.carts=t.data.data,localStorage.setItem("cartList",JSON.stringify(a.carts.carts)),a.$bus.$emit("cartPush",a.carts.carts)}))},addToCart:function(t,a){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/cart"),s=this,i=s.carts.carts,n=1;i.forEach((function(e){if(t==e.product_id){n=e.qty+a;var i=e.id,c="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/cart/").concat(i);s.$http.delete(c).then((function(t){}))}})),s.isLoading=!0;var c={product_id:t,qty:n};this.$http.post(e,{data:c}).then((function(t){s.$swal("加入購物車成功!"),s.$bus.$emit("cartPush",s.carts.carts),s.getCartList(),s.isLoading=!1}))},showAlert:function(t){var a=this;a.$swal({title:"確定要從購物車移除此商品?",showCancelButton:!0,cancelButtonText:"取消",confirmButtonText:"確定"}).then((function(e){e.isConfirmed&&(a.$swal("刪除成功","","success"),a.deleteCart(t))}))},deleteCart:function(t){var a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("hsinhui","/cart/").concat(t);this.$http.delete(e).then((function(t){console.log(t),a.getCartList()})).catch((function(t){console.log(t)}))}}}},ee08:function(t,a,e){"use strict";e("422c")}}]);
//# sourceMappingURL=chunk-edabbe3c.30d4fe6a.js.map